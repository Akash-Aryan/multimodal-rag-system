# Multimodal RAG System

A comprehensive Retrieval-Augmented Generation (RAG) system leveraging Large Language Models (LLMs) for **OFFLINE mode** that can ingest, index, and query diverse data formats including documents, images, and voice recordings within a unified semantic retrieval framework.

## ğŸ¯ Project Overview

This system provides:

- **Multimodal Content Processing**: Handle text documents (PDF, DOCX, TXT, MD), images (JPG, PNG, etc.), and audio files (WAV, MP3, etc.)
- **Offline LLM Integration**: Works with local LLMs via Ollama for complete privacy and offline operation
- **Semantic Search**: Vector-based similarity search across all content types
- **Unified Query Interface**: Ask questions about your documents, images, and audio content in natural language
- **Flexible Architecture**: Modular design supporting different embedding models, vector stores, and LLMs



## ğŸ—ï¸ System Architecture Overview

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                          PRESENTATION LAYER                                  â”‚
â”‚                         (React Native + UI)                                  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                               â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”‚
â”‚  â”‚  Unified Search  â”‚  â”‚  Upload Manager  â”‚  â”‚  Result Display  â”‚          â”‚
â”‚  â”‚   & Chat UI      â”‚  â”‚  (Doc/Img/Audio) â”‚  â”‚   with Citations â”‚          â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â”‚
â”‚           â”‚                     â”‚                      â”‚                     â”‚
â”‚           â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                     â”‚
â”‚                                 â”‚                                            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                  â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                          APPLICATION LAYER                                   â”‚
â”‚                    (Use Cases & Orchestration)                               â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                               â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  Ingestion Use Cases â”‚  â”‚   Query Use Cases    â”‚  â”‚ Security Cases  â”‚   â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤   â”‚
â”‚  â”‚ â€¢ DocumentIngestion  â”‚  â”‚ â€¢ SemanticSearch     â”‚  â”‚ â€¢ Authenticationâ”‚   â”‚
â”‚  â”‚ â€¢ ImageIngestion     â”‚  â”‚ â€¢ CrossModalRetrievalâ”‚  â”‚ â€¢ Authorization â”‚   â”‚
â”‚  â”‚ â€¢ AudioIngestion     â”‚  â”‚ â€¢ AnswerGeneration   â”‚  â”‚ â€¢ Encryption    â”‚   â”‚
â”‚  â”‚ â€¢ BatchProcessing    â”‚  â”‚ â€¢ CitationLinking    â”‚  â”‚ â€¢ AuditLogging  â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚             â”‚                         â”‚                        â”‚             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
              â”‚                         â”‚                        â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                           DOMAIN LAYER                                        â”‚
â”‚                   (Core Business Logic - Framework Agnostic)                  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                               â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚                        DOMAIN SERVICES                                 â”‚  â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  â”‚
â”‚  â”‚                                                                         â”‚  â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                   â”‚  â”‚
â”‚  â”‚  â”‚ EmbeddingService    â”‚    â”‚ TranscriptionServiceâ”‚                   â”‚  â”‚
â”‚  â”‚  â”‚ â€¢ Text Embedding    â”‚    â”‚ â€¢ Audio-to-Text     â”‚                   â”‚  â”‚
â”‚  â”‚  â”‚ â€¢ Image Embedding   â”‚    â”‚ â€¢ Whisper Model     â”‚                   â”‚  â”‚
â”‚  â”‚  â”‚ â€¢ Audio Embedding   â”‚    â”‚ â€¢ Timestamp Sync    â”‚                   â”‚  â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                   â”‚  â”‚
â”‚  â”‚                                                                         â”‚  â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                   â”‚  â”‚
â”‚  â”‚  â”‚ DocumentParserServiceâ”‚    â”‚ ImageAnalysisServiceâ”‚                   â”‚  â”‚
â”‚  â”‚  â”‚ â€¢ PDF Extraction    â”‚    â”‚ â€¢ OCR (Tesseract)   â”‚                   â”‚  â”‚
â”‚  â”‚  â”‚ â€¢ DOCX Parsing      â”‚    â”‚ â€¢ Image Captioning  â”‚                   â”‚  â”‚
â”‚  â”‚  â”‚ â€¢ Metadata Extract  â”‚    â”‚ â€¢ Visual Features   â”‚                   â”‚  â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                   â”‚  â”‚
â”‚  â”‚                                                                         â”‚  â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                   â”‚  â”‚
â”‚  â”‚  â”‚ LLMInferenceService â”‚    â”‚  CitationService    â”‚                   â”‚  â”‚
â”‚  â”‚  â”‚ â€¢ Answer Generation â”‚    â”‚ â€¢ Source Tracking   â”‚                   â”‚  â”‚
â”‚  â”‚  â”‚ â€¢ Context Grounding â”‚    â”‚ â€¢ Citation Linking  â”‚                   â”‚  â”‚
â”‚  â”‚  â”‚ â€¢ Quantized Models  â”‚    â”‚ â€¢ Provenance Chain  â”‚                   â”‚  â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                   â”‚  â”‚
â”‚  â”‚                                                                         â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â”‚                                                                               â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚                    DOMAIN ENTITIES & VALUE OBJECTS                     â”‚  â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  â”‚
â”‚  â”‚  Document â”‚ Image â”‚ Audio â”‚ Query â”‚ Answer â”‚ Citation â”‚ Embedding     â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                                               â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚                      DOMAIN INTERFACES (PORTS)                         â”‚  â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  â”‚
â”‚  â”‚  IVectorStore â”‚ IDocumentRepo â”‚ IMLModelRepo â”‚ IEncryption â”‚ IAuth    â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                                               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                      â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         INFRASTRUCTURE LAYER                                  â”‚
â”‚                  (Technical Implementation & Adapters)                        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                               â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚  â”‚                       INGESTION PIPELINE                                â”‚â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤â”‚
â”‚  â”‚                                                                          â”‚â”‚
â”‚  â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚â”‚
â”‚  â”‚   â”‚   Document      â”‚    â”‚     Image       â”‚    â”‚     Audio       â”‚   â”‚â”‚
â”‚  â”‚   â”‚   Processor     â”‚    â”‚   Processor     â”‚    â”‚   Processor     â”‚   â”‚â”‚
â”‚  â”‚   â”‚ (PDF,DOCX,TXT)  â”‚    â”‚ (JPG,PNG,WEBP)  â”‚    â”‚ (WAV,MP3,M4A)   â”‚   â”‚â”‚
â”‚  â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚â”‚
â”‚  â”‚            â”‚                      â”‚                       â”‚            â”‚â”‚
â”‚  â”‚            â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚            â”‚â”‚
â”‚  â”‚            â””â”€â–¶â”‚      Content Extraction Layer         â”‚â—€â”€â”€â”˜            â”‚â”‚
â”‚  â”‚               â”‚  â€¢ Text: PyPDF2, python-docx          â”‚                â”‚â”‚
â”‚  â”‚               â”‚  â€¢ Image: Pillow, Tesseract OCR       â”‚                â”‚â”‚
â”‚  â”‚               â”‚  â€¢ Audio: Whisper (whisper-tiny)      â”‚                â”‚â”‚
â”‚  â”‚               â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                â”‚â”‚
â”‚  â”‚                                â”‚                                       â”‚â”‚
â”‚  â”‚               â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                â”‚â”‚
â”‚  â”‚               â”‚      Metadata Enrichment              â”‚                â”‚â”‚
â”‚  â”‚               â”‚  â€¢ Timestamps, File Info, User ID     â”‚                â”‚â”‚
â”‚  â”‚               â”‚  â€¢ Content Type, Size, Checksum       â”‚                â”‚â”‚
â”‚  â”‚               â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                â”‚â”‚
â”‚  â”‚                                â”‚                                       â”‚â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â”‚                                   â”‚                                        â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚  â”‚                      EMBEDDING PIPELINE                                â”‚â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤â”‚
â”‚  â”‚                                                                         â”‚â”‚
â”‚  â”‚    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚â”‚
â”‚  â”‚    â”‚            Embedding Manager (Unified)                     â”‚     â”‚â”‚
â”‚  â”‚    â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤     â”‚â”‚
â”‚  â”‚    â”‚                                                             â”‚     â”‚â”‚
â”‚  â”‚    â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”               â”‚     â”‚â”‚
â”‚  â”‚    â”‚  â”‚  Text Embedder   â”‚  â”‚  Image Embedder  â”‚               â”‚     â”‚â”‚
â”‚  â”‚    â”‚  â”‚  â€¢ all-MiniLM-L6 â”‚  â”‚  â€¢ CLIP (ViT-B)  â”‚               â”‚     â”‚â”‚
â”‚  â”‚    â”‚  â”‚  â€¢ 384 dimensionsâ”‚  â”‚  â€¢ 512 dimensionsâ”‚               â”‚     â”‚â”‚
â”‚  â”‚    â”‚  â”‚  Size: ~80MB     â”‚  â”‚  Size: ~150MB    â”‚               â”‚     â”‚â”‚
â”‚  â”‚    â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜               â”‚     â”‚â”‚
â”‚  â”‚    â”‚                                                             â”‚     â”‚â”‚
â”‚  â”‚    â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”               â”‚     â”‚â”‚
â”‚  â”‚    â”‚  â”‚  Audio Embedder  â”‚  â”‚ Cross-Modal Proj â”‚               â”‚     â”‚â”‚
â”‚  â”‚    â”‚  â”‚  â€¢ Wav2Vec2-base â”‚  â”‚ â€¢ Unified 512-dimâ”‚               â”‚     â”‚â”‚
â”‚  â”‚    â”‚  â”‚  â€¢ 768â†’512 proj  â”‚  â”‚ â€¢ Similarity Map â”‚               â”‚     â”‚â”‚
â”‚  â”‚    â”‚  â”‚  Size: ~95MB     â”‚  â”‚ â€¢ Fusion Layer   â”‚               â”‚     â”‚â”‚
â”‚  â”‚    â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜               â”‚     â”‚â”‚
â”‚  â”‚    â”‚                                                             â”‚     â”‚â”‚
â”‚  â”‚    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€     â”‚â”‚
â”‚  â”‚                              â”‚                                         â”‚â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â”‚                                 â”‚                                          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚  â”‚                       STORAGE LAYER                                    â”‚â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤â”‚
â”‚  â”‚                                                                         â”‚â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚â”‚
â”‚  â”‚  â”‚                    Vector Store (FAISS)                         â”‚  â”‚â”‚
â”‚  â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  â”‚â”‚
â”‚  â”‚  â”‚  â€¢ IndexFlatIP: Exact search for <10K vectors                   â”‚  â”‚â”‚
â”‚  â”‚  â”‚  â€¢ IndexIVFFlat: Approximate search for 10K-1M vectors          â”‚  â”‚â”‚
â”‚  â”‚  â”‚  â€¢ Quantization: PQ/SQ for compression                          â”‚  â”‚â”‚
â”‚  â”‚  â”‚  â€¢ Partitioning: By modality & content type                     â”‚  â”‚â”‚
â”‚  â”‚  â”‚  â€¢ Persistence: Serialized to encrypted filesystem              â”‚  â”‚â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚â”‚
â”‚  â”‚                                                                         â”‚â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚â”‚
â”‚  â”‚  â”‚              Metadata Store (SQLite/Realm)                      â”‚  â”‚â”‚
â”‚  â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  â”‚â”‚
â”‚  â”‚  â”‚  Tables:                                                         â”‚  â”‚â”‚
â”‚  â”‚  â”‚  â€¢ documents(id, type, path, created_at, user_id, checksum)     â”‚  â”‚â”‚
â”‚  â”‚  â”‚  â€¢ embeddings(id, doc_id, vector_id, modality)                  â”‚  â”‚â”‚
â”‚  â”‚  â”‚  â€¢ queries(id, text, user_id, timestamp, result_count)          â”‚  â”‚â”‚
â”‚  â”‚  â”‚  â€¢ citations(id, answer_id, source_id, snippet, position)       â”‚  â”‚â”‚
â”‚  â”‚  â”‚  â€¢ audit_logs(id, user_id, action, timestamp, details)          â”‚  â”‚â”‚
â”‚  â”‚  â”‚  â€¢ Encryption: SQLCipher for database-level encryption          â”‚  â”‚â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚â”‚
â”‚  â”‚                                                                         â”‚â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚â”‚
â”‚  â”‚  â”‚              File System Storage (Encrypted)                    â”‚  â”‚â”‚
â”‚  â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  â”‚â”‚
â”‚  â”‚  â”‚  â€¢ Raw Files: AES-256-GCM encrypted blobs                        â”‚  â”‚â”‚
â”‚  â”‚  â”‚  â€¢ Cache: Query results, thumbnails, processed data             â”‚  â”‚â”‚
â”‚  â”‚  â”‚  â€¢ Models: Quantized ML models (GGUF/ONNX format)               â”‚  â”‚â”‚
â”‚  â”‚  â”‚  â€¢ Keys: Hardware-backed Keystore/Keychain                       â”‚  â”‚â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚â”‚
â”‚  â”‚                                                                         â”‚â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â”‚                                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚  â”‚                       RETRIEVAL PIPELINE                                â”‚â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤â”‚
â”‚  â”‚                                                                          â”‚â”‚
â”‚  â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚â”‚
â”‚  â”‚   â”‚              Query Processor                                 â”‚     â”‚â”‚
â”‚  â”‚   â”‚  â€¢ Intent Classification (search vs chat)                    â”‚     â”‚â”‚
â”‚  â”‚   â”‚  â€¢ Query Expansion & Reformulation                           â”‚     â”‚â”‚
â”‚  â”‚   â”‚  â€¢ Modality Detection (text/image/audio input)               â”‚     â”‚â”‚
â”‚  â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚â”‚
â”‚  â”‚                             â”‚                                          â”‚â”‚
â”‚  â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚â”‚
â”‚  â”‚   â”‚          Multimodal Retriever                                â”‚     â”‚â”‚
â”‚  â”‚   â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤     â”‚â”‚
â”‚  â”‚   â”‚  â€¢ Hybrid Search: Vector (semantic) + Keyword (BM25)         â”‚     â”‚â”‚
â”‚  â”‚   â”‚  â€¢ Cross-Modal Matching: Textâ†’Image, Audioâ†’Text, etc.        â”‚     â”‚â”‚
â”‚  â”‚   â”‚  â€¢ Reranking: MMR (Maximal Marginal Relevance)               â”‚     â”‚â”‚
â”‚  â”‚   â”‚  â€¢ Filtering: RBAC, date range, content type                 â”‚     â”‚â”‚
â”‚  â”‚   â”‚  â€¢ Top-K Selection: Configurable (default: 10-20 results)    â”‚     â”‚â”‚
â”‚  â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚â”‚
â”‚  â”‚                             â”‚                                          â”‚â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â”‚                                â”‚                                           â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚  â”‚                    GENERATION PIPELINE                                 â”‚â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤â”‚
â”‚  â”‚                                                                         â”‚â”‚
â”‚  â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚â”‚
â”‚  â”‚   â”‚               Context Preparation                               â”‚ â”‚â”‚
â”‚  â”‚   â”‚  â€¢ Retrieved chunks formatting                                  â”‚ â”‚â”‚
â”‚  â”‚   â”‚  â€¢ Source citation tagging                                      â”‚ â”‚â”‚
â”‚  â”‚   â”‚  â€¢ Context window optimization (<2048 tokens)                   â”‚ â”‚â”‚
â”‚  â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚â”‚
â”‚  â”‚                              â”‚                                        â”‚â”‚
â”‚  â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚â”‚
â”‚  â”‚   â”‚            LLM Engine (Quantized)                               â”‚ â”‚â”‚
â”‚  â”‚   â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ â”‚â”‚
â”‚  â”‚   â”‚  Options (choose one):                                          â”‚ â”‚â”‚
â”‚  â”‚   â”‚  â€¢ Llama 3.2 1B (INT4 quantized, ~500MB)                        â”‚ â”‚â”‚
â”‚  â”‚   â”‚  â€¢ Gemma 2B (INT4 quantized, ~450MB)                            â”‚ â”‚â”‚
â”‚  â”‚   â”‚  â€¢ Phi-3 Mini (INT8 quantized, ~480MB)                          â”‚ â”‚â”‚
â”‚  â”‚   â”‚                                                                  â”‚ â”‚â”‚
â”‚  â”‚   â”‚  Inference: ONNX Runtime / TensorFlow Lite                      â”‚ â”‚â”‚
â”‚  â”‚   â”‚  Prompt Template: RAG-specific with citation instructions       â”‚ â”‚â”‚
â”‚  â”‚   â”‚  Generation: Greedy/Sampling with temperature control           â”‚ â”‚â”‚
â”‚  â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚â”‚
â”‚  â”‚                              â”‚                                        â”‚â”‚
â”‚  â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚â”‚
â”‚  â”‚   â”‚         Answer Post-Processing                                  â”‚ â”‚â”‚
â”‚  â”‚   â”‚  â€¢ Citation extraction & linking                                â”‚ â”‚â”‚
â”‚  â”‚   â”‚  â€¢ Confidence scoring                                           â”‚ â”‚â”‚
â”‚  â”‚   â”‚  â€¢ Grounding verification (answer vs sources)                   â”‚ â”‚â”‚
â”‚  â”‚   â”‚  â€¢ Response formatting with markdown                            â”‚ â”‚â”‚
â”‚  â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚â”‚
â”‚  â”‚                                                                         â”‚â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â”‚                                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚  â”‚                      SECURITY LAYER                                     â”‚â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤â”‚
â”‚  â”‚                                                                          â”‚â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚â”‚
â”‚  â”‚  â”‚ Authentication   â”‚  â”‚  Authorization   â”‚  â”‚   Encryption     â”‚     â”‚â”‚
â”‚  â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤     â”‚â”‚
â”‚  â”‚  â”‚ â€¢ NTRO SSO       â”‚  â”‚ â€¢ RBAC Engine    â”‚  â”‚ â€¢ AES-256-GCM    â”‚     â”‚â”‚
â”‚  â”‚  â”‚ â€¢ Biometric Auth â”‚  â”‚ â€¢ Least Privilegeâ”‚  â”‚ â€¢ Hardware Keys  â”‚     â”‚â”‚
â”‚  â”‚  â”‚ â€¢ MFA (TOTP)     â”‚  â”‚ â€¢ Role Hierarchy â”‚  â”‚ â€¢ Key Rotation   â”‚     â”‚â”‚
â”‚  â”‚  â”‚ â€¢ Session Mgmt   â”‚  â”‚ â€¢ Access Logging â”‚  â”‚ â€¢ Secure Enclave â”‚     â”‚â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚â”‚
â”‚  â”‚                                                                          â”‚â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚â”‚
â”‚  â”‚  â”‚                    Audit & Monitoring                             â”‚ â”‚â”‚
â”‚  â”‚  â”‚  â€¢ All data access logged (who, what, when, where)               â”‚ â”‚â”‚
â”‚  â”‚  â”‚  â€¢ Tamper detection for models and data                          â”‚ â”‚â”‚
â”‚  â”‚  â”‚  â€¢ Anomaly detection in query patterns                           â”‚ â”‚â”‚
â”‚  â”‚  â”‚  â€¢ Compliance reporting (STQC, ISO 27001)                        â”‚ â”‚â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚â”‚
â”‚  â”‚                                                                          â”‚â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â”‚                                                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ”„ Core Data Flow Pipeline

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                                                              â”‚
â”‚  1ï¸âƒ£ INGEST                  2ï¸âƒ£ INDEX                   3ï¸âƒ£ RETRIEVE           â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”‚
â”‚  â”‚ Upload   â”‚â”€â”€Parseâ”€â”€â”€â”€â”€â”€â–¶â”‚ Embed    â”‚â”€â”€Storeâ”€â”€â”€â”€â”€â”€â–¶â”‚ Query    â”‚          â”‚
â”‚  â”‚ Document â”‚              â”‚ Content  â”‚              â”‚ Vectors  â”‚          â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â”‚
â”‚       â”‚                         â”‚                         â”‚                 â”‚
â”‚       â”‚                         â”‚                         â”‚                 â”‚
â”‚       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                 â”‚
â”‚                                 â”‚                                           â”‚
â”‚                                 â–¼                                           â”‚
â”‚                          4ï¸âƒ£ GROUND & CITE                                   â”‚
â”‚                          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                       â”‚
â”‚                          â”‚ Generate â”‚                                       â”‚
â”‚                          â”‚ Answer + â”‚                                       â”‚
â”‚                          â”‚ Sources  â”‚                                       â”‚
â”‚                          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                       â”‚
â”‚                                                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ“Š Technology Stack

### **Frontend/Mobile**
- **React Native** (0.72+): Cross-platform UI
- **React Navigation**: Screen routing
- **Native Modules**: Camera, File Picker, Audio Recorder
- **Async Storage**: Lightweight key-value cache

### **ML/AI Stack**
- **Embedding Models**:
  - Text: `sentence-transformers/all-MiniLM-L6-v2` (~80MB)
  - Image: `openai/clip-vit-base-patch32` (~150MB)
  - Audio: `facebook/wav2vec2-base` (~95MB)
  
- **LLM Engine**: 
  - Quantized Llama 3.2 1B (INT4, ~500MB) OR
  - Quantized Gemma 2B (INT4, ~450MB)
  
- **Speech-to-Text**: `openai/whisper-tiny` (~150MB)

- **Inference Engines**:
  - TensorFlow Lite (mobile-optimized)
  - ONNX Runtime (cross-platform)

### **Storage**
- **Vector Database**: FAISS (Facebook AI Similarity Search)
  - Supports both exact and approximate search
  - Offline-capable with file-based persistence
  
- **Metadata Database**: SQLite with SQLCipher (encrypted)
- **File Storage**: AES-256-GCM encrypted filesystem
- **Key Management**: iOS Keychain / Android Keystore

### **Security**
- **Encryption**: AES-256-GCM with hardware-backed keys
- **Authentication**: NTRO SSO + Biometric (Face ID/Touch ID/Fingerprint)
- **Authorization**: Role-Based Access Control (RBAC)
- **Audit**: Complete activity logging with tamper detection

### **Processing Libraries**
- **Document**: PyPDF2, python-docx, BeautifulSoup
- **Image**: Pillow, Tesseract OCR
- **Audio**: librosa, pydub, ffmpeg

---

## ğŸ” Security Architecture

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    Security Layers                          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                              â”‚
â”‚  ğŸ”’ Authentication Layer                                     â”‚
â”‚     â”œâ”€ NTRO SSO Integration (SAML 2.0)                      â”‚
â”‚     â”œâ”€ Multi-Factor Authentication (TOTP + Biometric)       â”‚
â”‚     â””â”€ Session Management (JWT with refresh tokens)         â”‚
â”‚                                                              â”‚
â”‚  ğŸ›¡ï¸  Authorization Layer                                     â”‚
â”‚     â”œâ”€ Role-Based Access Control (Admin/Analyst/Viewer)    â”‚
â”‚     â”œâ”€ Resource-Level Permissions                           â”‚
â”‚     â””â”€ Least Privilege Enforcement                          â”‚
â”‚                                                              â”‚
â”‚  ğŸ” Data Protection Layer                                    â”‚
â”‚     â”œâ”€ At Rest: AES-256-GCM encryption                      â”‚
â”‚     â”œâ”€ In Transit: TLS 1.3 (for sync operations)            â”‚
â”‚     â”œâ”€ In Memory: Secure memory wiping after use            â”‚
â”‚     â””â”€ Key Management: Hardware-backed secure storage       â”‚
â”‚                                                              â”‚
â”‚  ğŸ“‹ Audit & Compliance Layer                                â”‚
â”‚     â”œâ”€ Complete activity logging                            â”‚
â”‚     â”œâ”€ Tamper detection (checksums, signatures)             â”‚
â”‚     â”œâ”€ Compliance reports (STQC, ISO 27001)                 â”‚
â”‚     â””â”€ Data retention policies                              â”‚
â”‚                                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ“ˆ Performance Optimization Strategies

### **Model Optimization**
- INT4/INT8 quantization for all models
- GGUF format for efficient storage and loading
- Lazy loading: Load models on-demand
- Model pruning: Remove redundant parameters

### **Vector Search Optimization**
- Use FAISS IndexIVFFlat for datasets > 10K vectors
- Product Quantization (PQ) for compression (8-bit)
- Partitioning by modality and content type
- Incremental indexing for new documents

### **Caching Strategy**
- Query result cache (LRU, 100 entries)
- Embedding cache for frequently accessed documents
- Thumbnail cache for images
- Preprocessed audio chunks

### **Resource Management**
- Background processing for indexing (not blocking UI)
- Batch processing with configurable chunk sizes
- Memory pooling for embeddings
- Automatic garbage collection for old cache

---

## ğŸ¯ Performance Targets

| Metric | Target | Measurement |
|--------|--------|-------------|
| **Query Response Time** | < 2 seconds | End-to-end (input to display) |
| **Indexing Speed** | 100 docs/min | Background processing |
| **Accuracy** | 95%+ precision | Retrieval relevance |
| **RAM Usage** | < 2 GB | Active usage during query |
| **Storage Efficiency** | < 500MB per 10K docs | Including vectors + metadata |
| **Battery Consumption** | < 10% per hour | Active usage |
| **Model Footprint** | < 850 MB total | All models combined |
| **Cold Start** | < 5 seconds | App launch to ready state |

---

## ğŸ›ï¸ Clean Architecture Compliance

### **Dependency Rule**
```
Presentation â†’ Application â†’ Domain â†’ Infrastructure
     â†“              â†“            â†“            â†“
    UI          Use Cases    Business      Tech Details
                              Logic        & Frameworks
```

**Key Principle**: Dependencies point inward. Core domain is framework-agnostic.

### **Layer Responsibilities**

| Layer | Responsibility | No Dependencies On |
|-------|---------------|-------------------|
| **Presentation** | UI, user interaction | Application, Domain, Infrastructure |
| **Application** | Use case orchestration | Domain (interfaces only) |
| **Domain** | Business logic, entities | Any external frameworks |
| **Infrastructure** | Technical implementation | None (implements domain interfaces) |

---

## ğŸš€ Getting Started

### **Phase 1: Core Pipeline (Weeks 1-4)**
```bash
# 1. Document ingestion
mindra ingest documents/*.pdf

# 2. Vector indexing
mindra index --modality text

# 3. Query testing
mindra query "Find documents about satellite imagery"
```

### **Phase 2: Multimodal Support (Weeks 5-8)**
```bash
# Add image processing
mindra ingest images/*.jpg --with-ocr

# Add audio transcription
mindra ingest audio/*.mp3 --transc

## ğŸš€ Features

### Data Ingestion
- **Text Documents**: PDF, DOCX, TXT, Markdown files
- **Images**: JPG, PNG, GIF with OCR text extraction
- **Audio**: WAV, MP3, M4A with speech-to-text transcription
- **Batch Processing**: Ingest entire directories of mixed content

### Processing Capabilities
- **Text Chunking**: Intelligent text splitting with overlap
- **OCR**: Extract text from images using Tesseract
- **Speech Recognition**: Audio transcription using OpenAI Whisper
- **Metadata Extraction**: File hashes, sizes, processing timestamps

### Search & Retrieval
- **Semantic Search**: Vector similarity search across all content types
- **Hybrid Queries**: Combine text, image, and audio queries
- **Configurable Results**: Adjust similarity thresholds and result counts
- **Source Attribution**: Full traceability to original files

### LLM Integration
- **Offline Operation**: Use local LLMs via Ollama
- **Context-Aware Responses**: RAG-enhanced generation with retrieved context
- **Configurable Models**: Support for different model sizes and parameters

## ğŸ“‹ Prerequisites

- Python 3.8 or higher
- [Ollama](https://ollama.ai/) for local LLM inference
- [Tesseract OCR](https://github.com/tesseract-ocr/tesseract) for image text extraction

## ğŸ› ï¸ Installation

### 1. Clone the Repository

```bash
git clone <repository-url>
cd multimodal-rag-system
```

### 2. Create Virtual Environment

```bash
python -m venv venv
source venv/bin/activate  # On Windows: venv\\Scripts\\activate
```

### 3. Install Dependencies

```bash
pip install -r requirements.txt
```

### 4. Install System Dependencies

#### Tesseract OCR
- **Ubuntu/Debian**: `sudo apt-get install tesseract-ocr`
- **macOS**: `brew install tesseract`
- **Windows**: Download from [GitHub releases](https://github.com/UB-Mannheim/tesseract/wiki)

#### Ollama
1. Install Ollama from [https://ollama.ai/](https://ollama.ai/)
2. Pull a model: `ollama pull llama2`
3. Verify installation: `ollama list`

### 5. Configuration

```bash
cp .env.example .env
# Edit .env with your specific paths and configuration
```

## ğŸ”§ Configuration

The system uses YAML configuration files located in `config/config.yaml`. Key settings include:

```yaml
# LLM Configuration
llm:
  provider: "ollama"
  model_name: "llama2"
  temperature: 0.7
  max_tokens: 1024

# Vector Store
vector_store:
  provider: "faiss"
  dimension: 384
  persist_directory: "./data/embeddings"

# Document Processing
document_processing:
  chunk_size: 1000
  chunk_overlap: 200
```

## ğŸš€ Quick Start

### Basic Usage

```python
import asyncio
from src.multimodal_rag import MultimodalRAG, RAGConfig

async def main():
    # Initialize the system
    config = RAGConfig.from_yaml("config/config.yaml")
    rag_system = MultimodalRAG(config)
    
    # Ingest documents
    await rag_system.ingest_file("path/to/document.pdf")
    await rag_system.ingest_file("path/to/image.jpg")
    await rag_system.ingest_file("path/to/audio.mp3")
    
    # Or ingest entire directory
    await rag_system.ingest_directory("data/raw")
    
    # Query the system
    result = await rag_system.query(
        "What are the main topics discussed in the documents?",
        query_type="text",
        top_k=5
    )
    
    print(f"Answer: {result['response']}")
    print(f"Sources: {len(result.get('sources', []))} documents")

# Run the async function
asyncio.run(main())
```

### CLI Usage

```bash
# Ingest documents
python scripts/ingest.py --directory data/raw

# Query the system
python scripts/query.py --query "What is discussed in the documents?" --top-k 5

# Check system status
python scripts/status.py
```

## ğŸ“– Advanced Usage

### Custom Configuration

```python
from src.multimodal_rag import RAGConfig, MultimodalRAG

# Create custom configuration
config = RAGConfig(
    llm=LLMConfig(
        model_name="mistral",
        temperature=0.3
    ),
    vector_store=VectorStoreConfig(
        provider="chroma",
        dimension=768
    )
)

rag_system = MultimodalRAG(config)
```

### Batch Processing

```python
# Process multiple files
files = ["doc1.pdf", "image1.jpg", "audio1.wav"]
results = []

for file_path in files:
    result = await rag_system.ingest_file(file_path)
    results.append(result)

# Save index
await rag_system.save_index()
```

### Custom Queries

```python
# Text query
text_result = await rag_system.query(
    "Summarize the key findings",
    query_type="text",
    top_k=3
)

# Image-based query (using OCR text)
image_result = await rag_system.query(
    "path/to/query_image.jpg",
    query_type="image",
    top_k=5
)
```

## ğŸ³ Docker Deployment

```bash
# Build the image
docker-compose build

# Run the system
docker-compose up -d

# Access the API
curl http://localhost:8000/query -X POST -H "Content-Type: application/json" -d '{"query": "What is in the documents?", "top_k": 5}'
```

## ğŸ“ Project Structure

```
multimodal-rag-system/
â”œâ”€â”€ src/multimodal_rag/           # Core package
â”‚   â”œâ”€â”€ ingestion/                # Data ingestion modules
â”‚   â”‚   â”œâ”€â”€ document_processor.py # Text document processing
â”‚   â”‚   â”œâ”€â”€ image_processor.py    # Image processing & OCR
â”‚   â”‚   â””â”€â”€ audio_processor.py    # Audio transcription
â”‚   â”œâ”€â”€ indexing/                 # Indexing and embeddings
â”‚   â”‚   â”œâ”€â”€ vector_store.py       # Vector database interface
â”‚   â”‚   â””â”€â”€ embeddings.py         # Embedding generation
â”‚   â”œâ”€â”€ retrieval/                # Search and retrieval
â”‚   â”‚   â””â”€â”€ retriever.py          # Multimodal retriever
â”‚   â”œâ”€â”€ models/                   # LLM integration
â”‚   â”‚   â””â”€â”€ llm_manager.py        # LLM interface
â”‚   â”œâ”€â”€ config.py                 # Configuration management
â”‚   â””â”€â”€ core.py                   # Main RAG system
â”œâ”€â”€ config/                       # Configuration files
â”‚   â””â”€â”€ config.yaml               # Default configuration
â”œâ”€â”€ scripts/                      # Utility scripts
â”œâ”€â”€ notebooks/                    # Jupyter notebooks
â”œâ”€â”€ examples/                     # Example usage
â”œâ”€â”€ tests/                        # Test suite
â”œâ”€â”€ data/                         # Data directories
â”‚   â”œâ”€â”€ raw/                      # Raw input files
â”‚   â”œâ”€â”€ processed/                # Processed data
â”‚   â””â”€â”€ embeddings/               # Vector embeddings
â”œâ”€â”€ requirements.txt              # Python dependencies
â”œâ”€â”€ Dockerfile                    # Container configuration
â”œâ”€â”€ docker-compose.yml            # Multi-container setup
â””â”€â”€ README.md                     # This file
```

## ğŸ§ª Testing

```bash
# Run all tests
pytest tests/

# Run specific test categories
pytest tests/test_ingestion.py
pytest tests/test_retrieval.py

# Run with coverage
pytest --cov=src tests/
```

## ğŸ”„ API Reference

### Core Methods

#### `MultimodalRAG.ingest_file(file_path: str) -> Dict`
Ingest a single file into the system.

#### `MultimodalRAG.ingest_directory(directory_path: str) -> List[Dict]`
Ingest all supported files in a directory.

#### `MultimodalRAG.query(query: str, query_type: str = "text", top_k: int = 5) -> Dict`
Query the RAG system and get AI-generated responses.

#### `MultimodalRAG.get_system_stats() -> Dict`
Get system statistics and status information.

## ğŸ› ï¸ Development

### Setting up Development Environment

```bash
# Install development dependencies
pip install -r requirements.txt
pip install -e .

# Install pre-commit hooks
pre-commit install

# Run linting
black src/ tests/
flake8 src/ tests/
mypy src/
```

### Adding New Data Types

1. Create a new processor in `src/multimodal_rag/ingestion/`
2. Update the supported formats in `config.py`
3. Add processing logic to `core.py`
4. Update the embedding manager for new content types
5. Add tests for the new functionality

## ğŸ“Š Performance

### Benchmarks
- **Text Processing**: ~100 pages/minute
- **Image OCR**: ~10 images/minute
- **Audio Transcription**: ~5x real-time (depends on Whisper model)
- **Query Response**: <2 seconds for most queries

### Optimization Tips
- Use GPU acceleration for embedding models
- Adjust chunk sizes based on your content
- Consider using larger Whisper models for better accuracy
- Optimize FAISS index type for your use case

## ğŸ¤ Contributing

1. Fork the repository
2. Create a feature branch: `git checkout -b feature/new-feature`
3. Make your changes and add tests
4. Run the test suite: `pytest tests/`
5. Submit a pull request

## ğŸ“ License

This project is licensed under the MIT License - see the [LICENSE](LICENSE) file for details.

## ğŸ™ Acknowledgments

- [Ollama](https://ollama.ai/) for local LLM inference
- [OpenAI Whisper](https://github.com/openai/whisper) for speech recognition
- [Sentence Transformers](https://www.sbert.net/) for text embeddings
- [FAISS](https://github.com/facebookresearch/faiss) for vector similarity search
- [LangChain](https://github.com/langchain-ai/langchain) for text processing utilities

## ğŸ“¬ Support

For questions, issues, or contributions, please:
- Open an issue on GitHub
- Check the [documentation](docs/)
- Join our community discussions

---

**Built with â¤ï¸ for the open-source community**
